{% extends "base.html" %}
{% block title %}Sentiment Analysis File{% endblock %}
{% block content %}

<div class="layout">
    <!-- Sidebar -->
    <div class="sidebar">
        <h4>Upload a File</h4>
        <form method="post" enctype="multipart/form-data" action="{{ url_for('sentiment_analysis_file') }}">
            <div class="form-group">
                <label for="file">Choose a file:</label>
                <input type="file" id="file" name="file">
            </div>
            <input type="submit" value="Upload" class="btn">
        </form>

        {% if show_analysis %}
        <hr>
        <h4>Unique Users</h4>
        <div class="form-group">
            <select id="userDropdown" name="userDropdown" onchange="updateSelectedUser()">
                {% for user in user_list %}
                <option value="{{ user }}">{{ user }}</option>
                {% endfor %}
            </select>
            <input type="hidden" id="selected_user" name="selected_user">
        </div>
        <hr>
        <button id="analyzeSentimentBtn" class="btn">Analyze Sentiment</button>
        {% endif %}
    </div>
    
    <!-- Result Container for Sentiment Analysis -->
    <div class="result">
        <div class="content">
            <h3>Sentiment Analysis Results</h3>

            <!-- Mood Timeline -->
            <div class="result-content">
                <h4>Mood Over Time</h4>
                <div id="sentimentTimeContainer" class="result-section"></div>
            </div>

            <!-- User Sentiment Trend -->
            <div class="result-content">
                <h4>User-Specific Sentiment Trend</h4>
                <div id="sentimentUserContainer" class="result-section"></div>
            </div>

            <!-- Word Cloud for Sentiments -->
            <div class="result-content">
                <h4>Sentiment Word Cloud</h4>
                <div id="wordCloudContainer" class="result-section"></div>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{{ url_for('static', filename='js/sentiment.js') }}"></script>
{% endblock %}
